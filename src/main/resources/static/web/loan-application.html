<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nativa Bank - Accounts</title>

    <link rel="stylesheet" href="../styles/tailwind.css">
    <link rel="icon" type="image/x-icon" href="./assets/nativa02.svg">

</head>

<body>

    <div id="app" v-cloak>

        <!-- DIV PARA APLICAR LOS DIFERENTES TEMAS DENTRO DE LA PÁGINA -->
        <div :class="tema=='tema_0' ? '' : tema=='tema_1' ? 'theme-autumn-light' : tema=='tema_2' ? 'theme-autumn-dark' : tema=='tema_3' ? 'theme-winter-dark' : ''"
            class="bg-skin-normal min-h-screen">

            <!-- MINI MENÚ TEMAS -->
            <div class="fixed bottom-2 left-2 z-[31] group md:flex hidden transition-all ease-in-out duration-500">
                <button><img
                        class="relative bottom-0 mb-3 h-8 filtro opacity-50 group-hover:opacity-100 ease-in-out duration-300"
                        src="/web/assets/color.png" alt=""></button>
                <div class="hidden group-hover:flex aparecer2">
                    <button
                        class="bg-[#f3fcff] mx-1 p-1 hover:bg-[#03caff] rounded-full shadow-[1px_1px_5px_rgba(var(--color-text-base),0.3)] text-center text-[#03caff] hover:text-[#f3fcff] hover:rotate-180 ease-in-out duration-300"
                        @click="theme(0)">◑</button>
                    <button
                        class="bg-[#fffaef] mx-1 p-1 hover:bg-[#ed552e] rounded-full shadow-[1px_1px_5px_rgba(var(--color-text-base),0.3)] text-center text-[#ed552e] hover:text-[#fffaef] hover:rotate-180 ease-in-out duration-300"
                        @click="theme(1)">◑</button>
                    <button
                        class="bg-[#0d0e0f] mx-1 p-1 hover:bg-[#ed552e] rounded-full shadow-[1px_1px_5px_rgba(var(--color-text-base),0.3)] text-center text-[#ed552e] hover:text-[#0d0e0f] hover:rotate-180 ease-in-out duration-300"
                        @click="theme(2)">◐</button>
                    <button
                        class="bg-[#0d0e0f] mx-1 p-1 hover:bg-[#0ad99f] rounded-full shadow-[1px_1px_5px_rgba(var(--color-text-base),0.3)] text-center text-[#0ad99f] hover:text-[#0d0e0f] hover:rotate-180 ease-in-out duration-300"
                        @click="theme(3)">◐</button>
                </div>
            </div>

            <!-- BARRA DE NAVEGACIÓN -->
            <div ref="navbar" class="aparecer md:flex row fixed w-full justify-between pt-2 z-30 hidden">
                <a class="p-2 ml-6 m-3 img1 w-10 h-10" href="/web/accounts.html"></a>

                <nav class="sm:flex row justify-around antialiased text-skin-base">
                    <span class="pr-4 flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg hover:rounded-2xl text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased hover:text-skin-inverted hover:bg-gradient-to-r hover:from-skin-fill hover:to-skin-button-hover-accent hover:shadow-[1px_1px_5px_rgba(var(--color-button-accent),0.3)] ease-in duration-300"
                            href="/web/accounts.html">ACCOUNTS</a>

                    </span>
                    <span class="pr-4 flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg hover:rounded-2xl text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased hover:text-skin-inverted hover:bg-gradient-to-r hover:from-skin-fill hover:to-skin-button-hover-accent hover:shadow-[1px_1px_5px_rgba(var(--color-button-accent),0.3)] ease-in duration-300"
                            href="/web/transfers.html">TRANFERS</a>
                    </span>
                    <span class="pr-4 flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg hover:rounded-2xl text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased hover:text-skin-inverted hover:bg-gradient-to-r hover:from-skin-fill hover:to-skin-button-hover-accent hover:shadow-[1px_1px_5px_rgba(var(--color-button-accent),0.3)] ease-in duration-300"
                            href="/web/cards.html">CARDS</a>
                    </span>
                    <span class="pr-4 flex flex-col items-center">
                        <a class="p-3 m-2 rounded-2xl text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased hover:text-opacity-90 hover:shadow-[0px_0px_2px_rgba(var(--color-fill),1)]  ease-in duration-300"
                            href="/web/loan-application.html">LOANS APPLICATION</a>
                        <div class="absolute mt-11 w-2 h-2 rotate-45 bg-red-500 aparecer"></div>
                    </span>
                    <span class="pr-4 flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg hover:rounded-2xl text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased hover:text-skin-inverted hover:bg-gradient-to-r hover:from-skin-fill hover:to-skin-button-hover-accent hover:shadow-[1px_1px_5px_rgba(var(--color-button-accent),0.3)] ease-in duration-300"
                            href="javascript:void(0);" @click="bankLogout">LOGOUT</a>
                    </span>
                </nav>
            </div>

            <!-- TEMAS RESPONSIVE -->
            <div class="md:hidden flex flex-row fixed w-full justify-between z-50">
                <div class="supercenter-row">
                    <button><img
                            class="relative bottom-0 left-3 mb-3 h-6 filtro opacity-50 group-hover:opacity-100 ease-in-out duration-300"
                            src="/web/assets/color.png" alt="" @click="theme(5)"></button>
                </div>
                <div class=" flex flex-col items-center glass rounded-2xl mr-3 mt-3">
                    <a class="p-3 m-2 rounded-lg text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased"
                        href="javascript:void(0);" @click="bankLogout">LOGOUT</a>
                </div>


            </div>


            <!-- BARRA DE NAVEGACIÓN RESPONSIVE-->
            <div
                class="aparecer md:hidden inset-x-0 bottom-0 pb-4 row fixed w-full pt-2 z-30 glass2 flex items-center justify-center">

                <nav class="flex flex-row antialiased text-skin-base">
                    <span class=" flex flex-col items-center">
                        <a class="p-3 m-2 rounded-2xl text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased "
                            href="/web/accounts.html">ACCOUNTS</a>
                    </span>
                    <span class=" flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg  text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased bg-opacity-0"
                            href="/web/transfers.html">TRANFERS</a>
                    </span>
                    <span class="flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg  text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased bg-opacity-0"
                            href="/web/cards.html">CARDS</a>
                    </span>
                    <span class="flex flex-col items-center">
                        <a class="p-3 m-2 rounded-lg  text-skin-base text-xs font-bahnschrift font-semibold text-opacity-70 antialiased bg-opacity-0"
                            href="/web/loan-application.html">LOANS</a>
                        <div class="absolute mt-11 w-2 h-2 rotate-45 bg-red-500 aparecer"></div>
                    </span>
                </nav>
            </div>

            <!-- MODAL DE ERROR -->
            <div v-if="modalError"
                class="aparecer fixed flex justify-center bg-opacity-80 aparecer z-30 w-full h-full glass2">
            </div>
            <div v-if="modalError"
                class="aparecer fixed flex justify-center justify-items-center content-center w-full z-40">
                <div
                    class="flex flex-col justify-center items-center mt-10 bg-skin-normal filter-none w-96 h-36 rounded-2xl shadow-sm border border-slate-300">
                    <p class="text-skin-base text-center p-2 m-1">{{error}}</p>
                    <button class="boton1 font-bold" @click="modalError=false; error='';">OK</button>
                </div>
            </div>


            <!-- MODAL de CONFIRMACIÓN DE PRÉSTAMO -->
            <div v-if="modalConfirmation"
                class="aparecer fixed flex justify-center bg-opacity-80 aparecer z-30 w-full h-full glass2">
            </div>
            <div v-if="modalConfirmation"
                class="aparecer fixed flex justify-center justify-items-center content-center w-full z-40">
                <div
                    class="flex flex-col justify-center font-notosans items-center mt-10 bg-skin-normal text-skin-base text-center p-10 w-[35rem] h-auto rounded-2xl shadow-sm border border-slate-300">
                    <div class="text-xl font-bahnschrift opacity-80 inline text-skin-base">CONFIRM YOUR <b
                            class="text-skin-muted font-bold">LOAN APPLICATION</b></div>

                    <div class="bg-skin-button-accent h-0.5 lg:w-1/2 w-full mt-2 mb-6 bg-opacity-70"></div>
                    <!-- LÍNEA -->
                    <p class=" p-2 m-1"><b>Loan Type:</b> {{currentLoanExtra.name}}</p>
                    <p class=" p-2 m-1"><b>Destiny account:</b> ${{currentLoan.accountNumber}}
                    </p>
                    <p class=" p-2 m-1"><b>Amount:</b> ${{currentLoan.amount}}</p>
                    <p class=" p-2 m-1"><b>Interest:</b> {{currentLoan.interest}}</p>
                    <p class=" p-2 m-1"><b>Value of each Payment:</b>
                        ${{(currentLoan.amount*currentLoan.interest/currentLoan.payments).toFixed(2)}}</p>
                    <div>
                        <button class="boton1 font-bold" @click="modalConfirmation=false">RETURN</button>
                        <button class="boton1 font-bold"
                            @click="loanApplication(); modalConfirmation=false;">CONFIRM</button>
                    </div>
                </div>
            </div>

            <!-- MODAL PRÉSTAMO REALIZADO -->
            <div v-if="allOk"
                class="aparecer fixed flex justify-center bg-opacity-80 aparecer z-30 w-full h-full glass2">
            </div>
            <div v-if="allOk"
                class="aparecer fixed flex justify-center justify-items-center content-center w-full z-40">
                <div
                    class="flex flex-col justify-center items-center mt-10 bg-skin-normal filter-none w-96 h-36 rounded-2xl shadow-sm border border-slate-300">
                    <p class="text-skin-base text-center p-2 m-1 font-bold">Successful loan application!</p>
                </div>
            </div>


            <!-- CUERPO -->
            <section class="pt-24 flex justify-center">

                <div
                    class="aparecer mr-10 ml-10 p-4 pb-14 mb-20 md:w-3/5 w-full rounded-3xl flex-col grid justify-center content-center align-middle justify-items-center glass2 drop-shadow-[0px_1px_2px_var(--color-button-accent)]">

                    <form @submit.prevent="modalConfirmation=true"
                        class="flex flex-col justify-center items-center content-center place-items-center">

                        <div class="text-3xl font-bahnschrift opacity-80 inline text-skin-muted m-4">LOAN <b
                                class="text-skin-base text-xl font-bold">APPLICATION</b></div>

                        <p class="p-2 mb-4 text-skin-base">Select the type of loan you want to apply</p>
                        <div class="flex flex-row font-notosans">

                            <div v-for="loan in loanInfo">
                                <input class="hidden peer" type="radio" :id="loan.name" :value="loan.id"
                                    v-model="currentLoan.id" />
                                <label
                                    class="boton1 bg-skin-normal text-skin-base peer-checked:bg-red-400 peer-checked:rounded-2xl"
                                    :class="currentLoan.id == loan.id ? 'bg-skin-fill text-skin-inverted' : '' "
                                    :for="loan.name"
                                    @click="currentLoanExtra.payments=loan.payments; currentLoanExtra.name=loan.name; currentLoan.payments=0; currentLoan.interest=loan.interest">{{loan.name}}</label>
                            </div>

                        </div>

                        <div v-if="currentLoan.id>0">
                            <p class="p-2 mt-4 mb-4 text-skin-base">Select the amount of payments</p>
                            <div class="flex flex-col justify-center">
                                <select v-model="currentLoan.payments" class="p-1 rounded">
                                    <option disabled value="">Please select one</option>
                                    <option v-for="payment in currentLoanExtra.payments" :value="payment">{{payment}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div v-if="currentLoan.payments>0" class="flex flex-col justify-center">
                            <p class="p-2 mt-4 mb-4 text-skin-base">Indicate the loan amount</p>
                            <input class="flex flex-col justify-center rounded p-1 caret-green-400" type="number"
                                min="0" v-model="currentLoan.amount">
                            <p v-if="currentLoan.amount>0" class="p-2 mt-4 mb-4 text-skin-base">The amount of each
                                payment will be:
                                {{(currentLoan.amount*currentLoan.interest/currentLoan.payments).toFixed(2)}}</p>
                        </div>

                        <div v-if="currentLoan.amount>0" class="mb-3">

                            <p class="p-2 mb-4 text-skin-base">In wich account you want the loan?</p>
                            <div class="flex flex-row flex-wrap">

                                <div v-for="account in accounts" class="m-4">
                                    <input class="hidden peer" type="radio" :id="account.number" :value="account.number"
                                        v-model="currentLoan.accountNumber" />
                                    <label
                                        class="boton1 peer-checked:bg-red-400 peer-checked:rounded-xl  bg-skin-normal text-skin-base"
                                        :class="currentLoan.accountNumber == account.number ? 'bg-skin-fill text-skin-inverted' : '' "
                                        :for="account.number">{{account.number}}</label>
                                </div>

                            </div>

                        </div>

                        <button
                            v-if="currentLoan.accountNumber.length > 0 && currentLoan.amount > 0 && currentLoan.payments>0"
                            class="boton3a" type="submit">Apply to loan</button>

                    </form>

                </div>

            </section>

        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="./scripts/loan-application.js"></script>
</body>

</html>